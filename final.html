<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL FINA≈ÅOWY - FAMILIADA PRO</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #0f172a; color: white; padding: 20px; margin: 0; }
        .wrapper { max-width: 1400px; margin: 0 auto; display: flex; flex-direction: column; gap: 20px; }
        
        .card { background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        h2 { color: #facc15; font-size: 16px; margin: 0 0 15px 0; border-bottom: 2px solid #334155; padding-bottom: 8px; text-transform: uppercase; }
        
        /* Panel Sterowania */
        .grid-players { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .player-box { background: rgba(15, 23, 42, 0.4); padding: 20px; border-radius: 10px; border: 1px solid #475569; }
        .row-final { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; background: #1e293b; padding: 10px; border-radius: 8px; }

        .led { width: 22px; height: 22px; border-radius: 50%; background: #334155; border: 2px solid #000; transition: 0.3s; }
        .led-on { background: #22c55e; box-shadow: 0 0 15px #22c55e; }

        input { flex: 1; padding: 12px; background: #0f172a; border: 1px solid #3b82f6; color: #fff; border-radius: 6px; font-size: 15px; outline: none; }
        .input-pts { width: 70px; flex: none; text-align: center; color: #facc15; font-weight: bold; font-size: 20px; }

        button { padding: 10px 15px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 12px; transition: 0.2s; }
        .btn-blue { background: #3b82f6; color: white; }
        .btn-green { background: #22c55e; color: white; }
        .btn-gold { background: #eab308; color: black; }
        .btn-red { background: #ef4444; color: white; }

        /* Licznik Sumy */
        .total-box { text-align: center; margin-top: 10px; border-top: 1px solid #334155; padding-top: 15px; }
        .total-val { font-size: 70px; color: #facc15; font-weight: bold; }

        /* ≈öCIƒÑGA - WYSOKA CZYTELNO≈öƒÜ */
        .cheat-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
        .cheat-card { background: #0f172a; padding: 15px; border-radius: 10px; border-top: 5px solid #eab308; }
        .q-block { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #1e293b; }
        .q-title { color: #94a3b8; font-size: 12px; text-transform: uppercase; margin-bottom: 5px; }
        .ans-line { display: block; font-size: 14px; margin-bottom: 3px; }
        .ans-line b { color: #22c55e; }
    </style>
</head>
<body>

<div class="wrapper">
    <div class="card">
        <div style="display: flex; gap: 15px;">
            <input type="text" id="code" placeholder="WPISZ KOD Z TABLICY">
            <button onclick="connect()" class="btn-green" style="width: 250px;">PO≈ÅƒÑCZ Z TABLICƒÑ</button>
        </div>
    </div>

    <div class="card">
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 20px;">
            <button onclick="send('SND',{f:'final'})" class="btn-gold" style="height: 60px; font-size: 18px;">üéµ START FINA≈ÅU / PRZERYWNIK</button>
            <button onclick="send('SND',{f:'powtorzenie'})" class="btn-red" style="height: 60px;">‚ö†Ô∏è D≈πWIƒòK POWT√ìRZENIA</button>
        </div>

        <div class="grid-players">
            <div class="player-box">
                <h2 style="text-align: center;">GRACZ 1</h2>
                <div id="g1-rows"></div>
            </div>
            <div class="player-box">
                <h2 style="text-align: center;">GRACZ 2</h2>
                <div id="g2-rows"></div>
            </div>
        </div>

        <div class="total-box">
            <div style="color: #94a3b8; font-size: 14px;">SUMA PUNKT√ìW FINA≈ÅOWYCH</div>
            <div class="total-val" id="f-total">0</div>
        </div>
    </div>

    <div class="card">
        <h2>üìã BAZA PYTA≈É I ODPOWIEDZI (PE≈ÅNA LISTA)</h2>
        <div class="cheat-grid" id="cheat-container"></div>
    </div>
</div>

<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script>
    let conn, peer = new Peer(), totalF = 0;

    const database = [
        {
            n: 1,
            questions: [
                {q: "Wiƒôcej ni≈º jedno zwierzƒô", a: ["STADO (40)", "PARA (25)", "KLUCZ (15)", "WATAHA (10)", "R√ìJ (5)"]},
                {q: "Owoc z drzewa", a: ["JAB≈ÅKO (35)", "GRUSZKA (25)", "≈öLIWKA (15)", "BANAN (10)", "CZERE≈öNIA (5)"]},
                {q: "Co≈õ zimnego", a: ["L√ìD (45)", "LODY (30)", "≈öNIEG (15)", "WODA (5)", "POWIETRZE (2)"]},
                {q: "Ptak miejski", a: ["GO≈ÅƒÑB (40)", "WR√ìBEL (30)", "KAWKA (15)", "SROKA (10)", "SIKORKA (5)"]},
                {q: "Rzeka w Polsce", a: ["WIS≈ÅA (60)", "ODRA (20)", "WARTA (10)", "BUG (5)", "NAREW (5)"]}
            ]
        },
        {
            n: 2,
            questions: [
                {q: "W kuchni", a: ["N√ì≈ª (30)", "GARNEK (25)", "PATELNIA (20)", "TALERZ (15)", "≈ÅY≈ªKA (10)"]},
                {q: "Co≈õ s≈Çodkiego", a: ["CUKIER (35)", "MI√ìD (25)", "CZEKOLADA (20)", "CIASTKO (15)", "CUKIERKI (5)"]},
                {q: "Pa≈Ñstwo sƒÖsiad", a: ["NIEMCY (40)", "CZECHY (25)", "S≈ÅOWACJA (15)", "UKRAINA (10)", "LITWA (5)"]},
                {q: "Drzewo li≈õciaste", a: ["DƒÑB (35)", "BRZOZA (30)", "KLON (15)", "LIPA (10)", "BUK (5)"]},
                {q: "Kolor tƒôczy", a: ["CZERWONY (30)", "NIEBIESKI (25)", "≈ª√ì≈ÅTY (20)", "ZIELONY (15)", "FIOLET (10)"]}
            ]
        }
        // ... (dodaj kolejne zestawy analogicznie do powy≈ºszych)
    ];

    function connect() {
        const code = document.getElementById('code').value.toUpperCase();
        conn = peer.connect(code);
        conn.on('open', () => { alert("PO≈ÅƒÑCZONO!"); send('FIN'); });
    }

    function send(type, data={}) { if(conn) conn.send({type, ...data}); }

    function init() {
        // Generowanie panelu graczy
        [1, 2].forEach(p => {
            const container = document.getElementById(`g${p}-rows`);
            for(let i=0; i<5; i++) {
                container.innerHTML += `
                    <div class="row-final">
                        <div class="led" id="led-p${p}-r${i}"></div>
                        <input id="f${p}t${i}" placeholder="ODPOWIED≈π">
                        <button onclick="revFA(${p},${i})" class="btn-blue">ODP</button>
                        <input id="f${p}p${i}" type="number" class="input-pts" placeholder="0">
                        <button onclick="revFP(${p},${i})" class="btn-green">OK</button>
                    </div>`;
            }
        });

        // Generowanie ≈õciƒÖgi - ka≈ºda odpowied≈∫ w nowej linii
        const cheatContainer = document.getElementById('cheat-container');
        database.forEach(set => {
            let html = `<div class="cheat-card"><h3>ZESTAW ${set.n}</h3>`;
            set.questions.forEach(item => {
                html += `<div class="q-block"><div class="q-title">${item.q}</div>`;
                item.a.forEach(ans => {
                    html += `<span class="ans-line">¬∑ <b>${ans}</b></span>`;
                });
                html += `</div>`;
            });
            html += `</div>`;
            cheatContainer.innerHTML += html;
        });
    }

    function revFA(pl, i) { 
        send('SND', {f:'ok'}); 
        send('R_A', {pl, i, t: document.getElementById(`f${pl}t${i}`).value}); 
    }

    function revFP(pl, i) { 
        const pVal = parseInt(document.getElementById(`f${pl}p${i}`).value) || 0; 
        totalF += pVal; 
        document.getElementById('f-total').innerText = totalF;
        send('SND', {f:'final'}); 
        send('R_P', {pl, i, p: pVal, s: totalF}); 
        document.getElementById(`led-p${pl}-r${i}`).classList.add('led-on');
    }

    init();
</script>
</body>
</html>
