<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL FINAOWY - FAMILIADA PRO</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0f172a; color: white; padding: 20px; margin: 0; line-height: 1.5; }
        .wrapper { max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; gap: 20px; }
        
        /* Karty sekcji */
        .card { background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5); }
        h2 { color: #facc15; font-size: 16px; margin: 0 0 15px 0; border-bottom: 2px solid #334155; padding-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
        
        /* Ukad graczy */
        .grid-players { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .player-col { background: rgba(15, 23, 42, 0.5); padding: 15px; border-radius: 10px; }
        .row-final { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; background: #1e293b; padding: 8px; border-radius: 8px; border: 1px solid #475569; }

        /* Diody LED */
        .led { width: 20px; height: 20px; border-radius: 50%; background: #334155; flex-shrink: 0; border: 2px solid #0f172a; }
        .led-active { background: #22c55e; box-shadow: 0 0 15px #22c55e; border-color: #f0fdf4; }

        /* Formularze */
        input { flex: 1; padding: 10px; background: #0f172a; border: 1px solid #3b82f6; color: #fff; border-radius: 6px; font-size: 14px; outline: none; }
        input:focus { border-color: #facc15; }
        .input-pts { width: 60px; flex: none; text-align: center; color: #facc15; font-weight: bold; font-size: 18px; }

        /* Przyciski */
        button { padding: 10px 15px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 11px; transition: all 0.2s; }
        button:active { transform: scale(0.95); }
        .btn-blue { background: #3b82f6; color: white; }
        .btn-green { background: #22c55e; color: white; }
        .btn-gold { background: #eab308; color: black; }
        .btn-red { background: #ef4444; color: white; }

        /* Tabela cigi */
        .cheat-table { width: 100%; border-collapse: collapse; font-size: 13px; background: #0f172a; border-radius: 8px; overflow: hidden; }
        .cheat-table th { background: #334155; color: #facc15; padding: 12px; text-align: left; }
        .cheat-table td { padding: 10px; border-bottom: 1px solid #334155; }
        .cheat-table tr:hover { background: #1e293b; }
        .top-ans { color: #22c55e; font-weight: bold; }

        /* Licznik punkt贸w */
        .total-container { display: flex; justify-content: center; align-items: center; gap: 20px; margin: 10px 0; }
        .total-display { font-size: 50px; color: #facc15; font-weight: bold; text-shadow: 0 0 10px rgba(234, 179, 8, 0.4); }
    </style>
</head>
<body>

<div class="wrapper">
    <div class="card">
        <h2>Poczenie z systemem</h2>
        <div style="display: flex; gap: 15px;">
            <input type="text" id="code" placeholder="WPISZ KOD WYWIETLONY NA TABLICY">
            <button onclick="connect()" class="btn-green" style="width: 200px; font-size: 14px;">POCZ SYSTEMY</button>
        </div>
    </div>

    <div class="card">
        <h2>Panel Sterowania Finaem</h2>
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 20px;">
            <button onclick="send('SND',{f:'final'})" class="btn-gold" style="height: 60px; font-size: 16px;"> START FINAU / PRZERYWNIK</button>
            <button onclick="send('SND',{f:'powtorzenie'})" class="btn-red" style="height: 60px; font-size: 14px;">锔 D殴WIK POWTRZENIA</button>
        </div>
        
        <div class="grid-players">
            <div class="player-col">
                <h2 style="text-align: center; border: none;">GRACZ 1</h2>
                <div id="g1-rows"></div>
            </div>
            <div class="player-col">
                <h2 style="text-align: center; border: none;">GRACZ 2</h2>
                <div id="g2-rows"></div>
            </div>
        </div>

        <div class="total-container">
            <div style="font-size: 20px; text-transform: uppercase; color: #94a3b8;">Suma punkt贸w finaowych:</div>
            <div class="total-display"><span id="f-total">0</span></div>
        </div>
    </div>

    <div class="card">
        <h2> Baza 10 Fina贸w (ciga Prowadzcego)</h2>
        <table class="cheat-table">
            <thead>
                <tr>
                    <th style="width: 50px;">NR</th>
                    <th>Pytania oraz najwy偶ej punktowane odpowiedzi</th>
                </tr>
            </thead>
            <tbody id="cheat-body"></tbody>
        </table>
    </div>
</div>

<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script>
    let conn, peer = new Peer(), totalF = 0;

    const finals = [
        {id: 1, data: "1. Wicej ni偶 jedno: <span class='top-ans'>STADO(40) PARA(25)</span> | 2. Owoc: <span class='top-ans'>JABKO(35) BANAN(20)</span> | 3. Zimne: <span class='top-ans'>LD(50) LODY(30)</span> | 4. Ptak: <span class='top-ans'>WRBEL(30) ORZE(20)</span> | 5. Rzeka: <span class='top-ans'>WISA(60)</span>"},
        {id: 2, data: "1. W kuchni: <span class='top-ans'>N呕(35) GARNEK(25)</span> | 2. Sodkie: <span class='top-ans'>CUKIER(40) MID(20)</span> | 3. Pastwo: <span class='top-ans'>POLSKA(45)</span> | 4. Drzewo: <span class='top-ans'>DB(30)</span> | 5. Kolor: <span class='top-ans'>NIEBIESKI(35)</span>"},
        {id: 3, data: "1. Na niadanie: <span class='top-ans'>JAJECZNICA(30)</span> | 2. Nap贸j: <span class='top-ans'>WODA(40) KAWA(20)</span> | 3. Kwiat: <span class='top-ans'>R呕A(45)</span> | 4. Ryba: <span class='top-ans'>KARP(35)</span> | 5. Metal: <span class='top-ans'>ZOTO(20)</span>"},
        {id: 4, data: "1. Sport: <span class='top-ans'>PIKA NO呕NA(50)</span> | 2. Mebel: <span class='top-ans'>ST(35) KRZESO(25)</span> | 3. Owad: <span class='top-ans'>MUCHA(30)</span> | 4. Miasto: <span class='top-ans'>WARSZAWA(40)</span> | 5. Instrument: <span class='top-ans'>GITARA(35)</span>"},
        {id: 5, data: "1. Warzywo: <span class='top-ans'>MARCHEW(35) ZIEMNIAK(30)</span> | 2. Planeta: <span class='top-ans'>ZIEMIA(40)</span> | 3. Auto: <span class='top-ans'>FIAT(30)</span> | 4. Cz ciaa: <span class='top-ans'>RKA(30)</span> | 5. Imi: <span class='top-ans'>JAN(30)</span>"},
        {id: 6, data: "1. Narzdzie: <span class='top-ans'>MOTEK(40)</span> | 2. Zwierz: <span class='top-ans'>PIES(50) KOT(35)</span> | 3. wieci: <span class='top-ans'>SOCE(45)</span> | 4. Szkoa: <span class='top-ans'>TABLICA(30)</span> | 5. Ubranie: <span class='top-ans'>SPODNIE(30)</span>"},
        {id: 7, data: "1. Marka auta: <span class='top-ans'>FIAT(25)</span> | 2. Miesic: <span class='top-ans'>MAJ(30)</span> | 3. Pora roku: <span class='top-ans'>LATO(60)</span> | 4. Budynek: <span class='top-ans'>DOM(45)</span> | 5. Jzyk: <span class='top-ans'>POLSKI(40)</span>"},
        {id: 8, data: "1. Gra: <span class='top-ans'>SZACHY(30)</span> | 2. Las: <span class='top-ans'>DRZEWA(50) GRZYBY(20)</span> | 3. Okrge: <span class='top-ans'>KOO(40)</span> | 4. Przyprawa: <span class='top-ans'>SL(45) PIEPRZ(35)</span> | 5. 呕ywio: <span class='top-ans'>OGIE(35)</span>"},
        {id: 9, data: "1. Stolica: <span class='top-ans'>PARY呕(30)</span> | 2. Bajka: <span class='top-ans'>MYSZKA MIKI(35)</span> | 3. Praca: <span class='top-ans'>BIURO(30)</span> | 4. Pogoda: <span class='top-ans'>SOCE(35)</span> | 5. Waluta: <span class='top-ans'>ZOTY(50)</span>"},
        {id: 10, data: "1. G贸ry: <span class='top-ans'>TATRY(65)</span> | 2. Morze: <span class='top-ans'>BATYK(70)</span> | 3. Nap贸j: <span class='top-ans'>COLA(45)</span> | 4. Kosmos: <span class='top-ans'>GWIAZDY(40)</span> | 5. Pyn: <span class='top-ans'>WODA(55)</span>"}
    ];

    function connect() {
        const code = document.getElementById('code').value.toUpperCase();
        conn = peer.connect(code);
        conn.on('open', () => { 
            alert("POCZONO POMYLNIE!"); 
            send('FIN'); 
        });
    }

    function send(type, data={}) { if(conn) conn.send({type, ...data}); }

    function init() {
        // Tworzenie wierszy dla obu graczy
        [1, 2].forEach(p => {
            const container = document.getElementById(`g${p}-rows`);
            for(let i=0; i<5; i++) {
                container.innerHTML += `
                    <div class="row-final">
                        <div class="led" id="led-p${p}-r${i}"></div>
                        <input id="f${p}t${i}" placeholder="ODPOWIED殴">
                        <button onclick="revFA(${p},${i})" class="btn-blue">ODP</button>
                        <input id="f${p}p${i}" type="number" class="input-pts" placeholder="0">
                        <button onclick="revFP(${p},${i})" class="btn-green">ZATWIERD殴</button>
                    </div>`;
            }
        });

        // Wypenianie cigi
        const body = document.getElementById('cheat-body');
        finals.forEach(f => {
            body.innerHTML += `<tr><td>${f.id}</td><td>${f.data}</td></tr>`;
        });
    }

    function revFA(pl, i) { 
        send('SND', {f:'ok'}); 
        send('R_A', {pl, i, t: document.getElementById(`f${pl}t${i}`).value}); 
    }

    function revFP(pl, i) { 
        const pVal = parseInt(document.getElementById(`f${pl}p${i}`).value) || 0; 
        totalF += pVal; 
        document.getElementById('f-total').innerText = totalF;
        send('SND', {f:'final'}); 
        send('R_P', {pl, i, p: pVal, s: totalF}); 
        
        // Aktywacja LED
        document.getElementById(`led-p${pl}-r${i}`).classList.add('led-active');
        // Powiadomienie panelu g贸wnego
        send('LED_SYNC', {player: pl, row: i});
    }

    init();
</script>
</body>
</html>
