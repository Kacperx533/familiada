<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL FINAOWY - FAMILIADA PRO</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #0f172a; color: white; padding: 20px; margin: 0; }
        .wrapper { max-width: 1300px; margin: 0 auto; display: flex; flex-direction: column; gap: 20px; }
        
        /* Karty */
        .card { background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155; box-shadow: 0 10px 20px rgba(0,0,0,0.4); }
        h2 { color: #facc15; font-size: 16px; margin: 0 0 15px 0; border-bottom: 2px solid #334155; padding-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
        
        /* Ukad Graczy */
        .grid-players { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .player-box { background: rgba(15, 23, 42, 0.4); padding: 20px; border-radius: 10px; border: 1px solid #475569; }
        .row-final { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; padding: 10px; background: #1e293b; border-radius: 8px; border: 1px solid #334155; }

        /* Kontrolki LED */
        .led { width: 22px; height: 22px; border-radius: 50%; background: #334155; flex-shrink: 0; border: 2px solid #000; }
        .led-on { background: #22c55e; box-shadow: 0 0 15px #22c55e; }

        /* Inputy */
        input { flex: 1; padding: 12px; background: #0f172a; border: 1px solid #3b82f6; color: #fff; border-radius: 6px; font-size: 15px; outline: none; }
        input:focus { border-color: #facc15; }
        .input-pts { width: 70px; flex: none; text-align: center; color: #facc15; font-weight: bold; font-size: 20px; }

        /* Przyciski */
        button { padding: 10px 18px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 12px; transition: 0.2s; }
        .btn-blue { background: #3b82f6; color: white; }
        .btn-green { background: #22c55e; color: white; }
        .btn-gold { background: #eab308; color: black; }
        .btn-red { background: #ef4444; color: white; }
        button:hover { opacity: 0.8; transform: translateY(-1px); }

        /* Licznik */
        .total-box { text-align: center; padding: 20px; margin-top: 10px; }
        .total-val { font-size: 60px; color: #facc15; font-weight: bold; text-shadow: 0 0 20px rgba(234, 179, 8, 0.5); }

        /* ciga - KA呕DA ODPOWIED殴 W NOWEJ LINII */
        .cheat-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 15px; margin-top: 10px; }
        .cheat-item { background: #0f172a; padding: 15px; border-radius: 8px; border-top: 4px solid #eab308; }
        .cheat-q-row { border-bottom: 1px solid #1e293b; padding: 6px 0; font-size: 13px; line-height: 1.4; }
        .cheat-q-row b { color: #22c55e; display: block; margin-top: 2px; } /* Punkty pod pytaniem */
    </style>
</head>
<body>

<div class="wrapper">
    <div class="card">
        <div style="display: flex; gap: 15px;">
            <input type="text" id="code" placeholder="KOD Z TABLICY">
            <button onclick="connect()" class="btn-green" style="width: 200px;">POCZ SYSTEM</button>
        </div>
    </div>

    <div class="card">
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 25px;">
            <button onclick="send('SND',{f:'final'})" class="btn-gold" style="height: 60px; font-size: 18px;"> PRZERYWNIK / START FINAU</button>
            <button onclick="send('SND',{f:'powtorzenie'})" class="btn-red" style="height: 60px;">锔 D殴WIK POWTRZENIA</button>
        </div>

        <div class="grid-players">
            <div class="player-box">
                <h2 style="text-align: center; border: none;">GRACZ 1</h2>
                <div id="g1-rows"></div>
            </div>
            <div class="player-box">
                <h2 style="text-align: center; border: none;">GRACZ 2</h2>
                <div id="g2-rows"></div>
            </div>
        </div>

        <div class="total-box">
            <div style="text-transform: uppercase; color: #94a3b8; font-size: 14px;">Aktualna suma punkt贸w:</div>
            <div class="total-val" id="f-total">0</div>
        </div>
    </div>

    <div class="card">
        <h2> BAZA FINAW (CZYTELNA LISTA)</h2>
        <div class="cheat-grid" id="cheat-container"></div>
    </div>
</div>

<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script>
    let conn, peer = new Peer(), totalF = 0;

    const finalsBase = [
        {n:1, q:["Owoc: Jabko(35), Banan(25)", "Kolor: Niebieski(40), Czerwony(30)", "Zwierz: Pies(50), Kot(35)", "Miasto: Pary偶(30), Londyn(25)", "Sport: Pika(45)"]},
        {n:2, q:["Zimne: L贸d(40), Lody(30)", "Ptak: Wr贸bel(30), Bocian(25)", "Auto: Fiat(35), BMW(25)", "Kwiat: R贸偶a(50), Tulipan(25)", "Imi: Jan(30)"]},
        {n:3, q:["Na chleb: Maso(45), Ser(25)", "Nap贸j: Woda(40), Kawa(25)", "Drzewo: Db(35), Brzoza(25)", "Ryba: Karp(40), led藕(25)", "Rzeka: Wisa(65)"]},
        {n:4, q:["Cz ciaa: Rka(30), Gowa(25)", "Mebel: Krzeso(30), St贸(25)", "Pisanie: Dugopis(45), O贸wek(30)", "Stolica: Warszawa(55)", "Planeta: Ziemia(40)"]},
        {n:5, q:["Sodkie: Czekolada(35), Ciastko(25)", "Warzywo: Marchew(40), Ziemniak(30)", "Narzdzie: Motek(45)", "Las: Drzewa(50)", "Pogoda: Deszcz(35)"]},
        {n:6, q:["Biay nap贸j: Mleko(60), Kefir(15)", "Garderoba: Kurtka(30), Spodnie(25)", "Szkoa: awka(35)", "Dom: Okno(40)", "Elektronika: Telefon(50)"]},
        {n:7, q:["Transport: Samoch贸d(40), Pocig(25)", "Mokre: Woda(55)", "Muzyka: Rock(30)", "Taniec: Walc(35)", "Niebo: Soce(45)"]},
        {n:8, q:["Praca: Biuro(35), Szkoa(25)", "Hobby: Sport(30)", "Budynek: Wie偶owiec(50)", "Gorce: Ogie(40)", "Twarde: Kamie(45)"]},
        {n:9, q:["Pora roku: Lato(60), Wiosna(20)", "Obiad: Zupa(35)", "Bajka: Myszka Miki(30)", "G贸ry: Tatry(70)", "Drzewo lene: Sosna(45)"]},
        {n:10, q:["Zabawka: Mi(40), Lalka(30)", "Walka: Boks(40)", "Kompozytor: Chopin(60)", "Morze: Batyckie(75)", "Szybkie: Bolid F1(40)"]}
    ];

    function connect() {
        const code = document.getElementById('code').value.toUpperCase();
        conn = peer.connect(code);
        conn.on('open', () => { alert("POCZONO!"); send('FIN'); });
    }

    function send(type, data={}) { if(conn) conn.send({type, ...data}); }

    function init() {
        // Generowanie p贸l sterowania
        [1, 2].forEach(p => {
            const container = document.getElementById(`g${p}-rows`);
            for(let i=0; i<5; i++) {
                container.innerHTML += `
                    <div class="row-final">
                        <div class="led" id="led-p${p}-r${i}"></div>
                        <input id="f${p}t${i}" placeholder="ODPOWIED殴">
                        <button onclick="revFA(${p},${i})" class="btn-blue">ODP</button>
                        <input id="f${p}p${i}" type="number" class="input-pts" placeholder="0">
                        <button onclick="revFP(${p},${i})" class="btn-green">ZATWIERD殴</button>
                    </div>`;
            }
        });

        // Generowanie cigi - KA呕DA ODPOWIED殴 W SWOJEJ LINII
        const cheatContainer = document.getElementById('cheat-container');
        finalsBase.forEach(f => {
            let questionsHtml = f.q.map(line => {
                const parts = line.split(':');
                return `<div class="cheat-q-row">${parts[0]}: <b>${parts[1]}</b></div>`;
            }).join('');
            
            cheatContainer.innerHTML += `
                <div class="cheat-item">
                    <h3 style="margin:0 0 10px 0; color:#eab308; font-size:14px;">ZESTAW ${f.n}</h3>
                    ${questionsHtml}
                </div>`;
        });
    }

    function revFA(pl, i) { 
        send('SND', {f:'ok'}); 
        send('R_A', {pl, i, t: document.getElementById(`f${pl}t${i}`).value}); 
    }

    function revFP(pl, i) { 
        const pVal = parseInt(document.getElementById(`f${pl}p${i}`).value) || 0; 
        totalF += pVal; 
        document.getElementById('f-total').innerText = totalF;
        send('SND', {f:'final'}); 
        send('R_P', {pl, i, p: pVal, s: totalF}); 
        document.getElementById(`led-p${pl}-r${i}`).classList.add('led-on');
    }

    init();
</script>
</body>
</html>
