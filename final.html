<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL FINA≈ÅOWY - FAMILIADA PRO</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #0f172a; color: white; padding: 20px; margin: 0; }
        .wrapper { max-width: 1400px; margin: 0 auto; display: flex; flex-direction: column; gap: 20px; }
        
        .card { background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        h2 { color: #facc15; font-size: 16px; margin: 0 0 15px 0; border-bottom: 2px solid #334155; padding-bottom: 8px; text-transform: uppercase; }
        
        .grid-players { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .player-box { background: rgba(15, 23, 42, 0.4); padding: 20px; border-radius: 10px; border: 2px solid #334155; transition: 0.3s; }
        .player-active { border-color: #facc15; background: rgba(250, 204, 21, 0.05); }
        
        .row-final { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; background: #1e293b; padding: 10px; border-radius: 8px; border: 1px solid transparent; }
        .row-active { border-color: #3b82f6; background: #2d3748; }

        .led { width: 22px; height: 22px; border-radius: 50%; background: #334155; border: 2px solid #000; }
        .led-on { background: #22c55e; box-shadow: 0 0 15px #22c55e; }

        input { flex: 1; padding: 12px; background: #0f172a; border: 1px solid #3b82f6; color: #fff; border-radius: 6px; font-size: 15px; outline: none; }
        input:focus { border-color: #facc15; }
        .input-pts { width: 70px; flex: none; text-align: center; color: #facc15; font-weight: bold; font-size: 20px; }

        button { padding: 10px 15px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 11px; transition: 0.2s; }
        .btn-blue { background: #3b82f6; color: white; }
        .btn-green { background: #22c55e; color: white; }
        .btn-gold { background: #eab308; color: black; }
        .btn-red { background: #ef4444; color: white; }

        .total-val { font-size: 70px; color: #facc15; font-weight: bold; text-align: center; }

        /* ≈öCIƒÑGA KLIKALNA */
        .cheat-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
        .cheat-card { background: #0f172a; padding: 15px; border-radius: 10px; border-top: 5px solid #eab308; }
        .q-block { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #1e293b; }
        .q-title { color: #facc15; font-size: 13px; font-weight: bold; margin-bottom: 8px; }
        
        .ans-btn { 
            display: block; width: 100%; text-align: left; background: #1e293b; 
            color: #cbd5e1; border: 1px solid #334155; padding: 6px 10px; 
            margin-bottom: 4px; border-radius: 4px; font-size: 12px; cursor: pointer;
        }
        .ans-btn:hover { background: #334155; color: #22c55e; border-color: #22c55e; }
        .ans-btn b { color: #22c55e; float: right; }
    </style>
</head>
<body>

<div class="wrapper">
    <div class="card">
        <div style="display: flex; gap: 15px;">
            <input type="text" id="code" placeholder="KOD Z TABLICY">
            <button onclick="connect()" class="btn-green" style="width: 250px;">PO≈ÅƒÑCZ SYSTEM</button>
        </div>
    </div>

    <div class="card">
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 20px;">
            <button onclick="send('SND',{f:'final'})" class="btn-gold" style="height: 60px; font-size: 18px;">üéµ START FINA≈ÅU / PRZERYWNIK</button>
            <button onclick="send('SND',{f:'powtorzenie'})" class="btn-red" style="height: 60px;">‚ö†Ô∏è D≈πWIƒòK POWT√ìRZENIA</button>
        </div>

        <div class="grid-players">
            <div class="player-box" id="p1-box">
                <h2 style="text-align: center;">GRACZ 1</h2>
                <div id="g1-rows"></div>
            </div>
            <div class="player-box" id="p2-box">
                <h2 style="text-align: center;">GRACZ 2</h2>
                <div id="g2-rows"></div>
            </div>
        </div>

        <div class="total-val" id="f-total">0</div>
    </div>

    <div class="card">
        <h2>üìã KLIKNIJ ODPOWIED≈π, ABY WPISAƒÜ JƒÑ AUTOMATYCZNIE</h2>
        <div class="cheat-grid" id="cheat-container"></div>
    </div>
</div>

<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script>
    let conn, peer = new Peer(), totalF = 0;
    let activePlayer = 1, activeRow = 0; // ≈öledzenie gdzie wpisaƒá klikniƒôtƒÖ odpowied≈∫

    const database = [
    { n: 1, questions: [
            {q: "Owoc", a: ["JAB≈ÅKO (35)", "BANAN (25)", "GRUSZKA (15)", "≈öLIWKA (10)", "POMARA≈ÉCZA (5)"]},
            {q: "Kolor", a: ["NIEBIESKI (40)", "CZERWONY (30)", "ZIELONY (15)", "≈ª√ì≈ÅTY (10)", "BIA≈ÅY (5)"]},
            {q: "Zwierzƒô", a: ["PIES (50)", "KOT (35)", "KO≈É (10)", "CHOMIK (3)", "PTAK (2)"]},
            {q: "Miasto", a: ["PARY≈ª (30)", "LONDYN (25)", "WARSZAWA (20)", "BERLIN (15)", "RZYM (10)"]},
            {q: "Sport", a: ["PI≈ÅKA (45)", "BIEGANIE (20)", "TENIS (15)", "P≈ÅYWANIE (10)", "SIATK√ìWKA (10)"]}
        ]},
        { n: 2, questions: [
            {q: "Zimne", a: ["L√ìD (40)", "LODY (30)", "≈öNIEG (20)", "WODA (5)", "WIATR (5)"]},
            {q: "Ptak", a: ["WR√ìBEL (30)", "BOCIAN (25)", "GO≈ÅƒÑB (20)", "ORZE≈Å (15)", "SIKORKA (10)"]},
            {q: "Auto", a: ["FIAT (35)", "BMW (25)", "AUDI (20)", "TOYOTA (15)", "FORD (5)"]},
            {q: "Kwiat", a: ["R√ì≈ªA (50)", "TULIPAN (25)", "NARCYZ (15)", "GO≈πDZIK (5)", "STOKROTKA (5)"]},
            {q: "Imiƒô M", a: ["JAN (30)", "ADAM (25)", "MAREK (20)", "PIOTR (15)", "ANDRZEJ (10)"]}
        ]},
        { n: 3, questions: [
            {q: "Na chleb", a: ["MAS≈ÅO (45)", "SER (25)", "SZYNKA (15)", "D≈ªEM (10)", "POMIDOR (5)"]},
            {q: "Nap√≥j", a: ["WODA (40)", "KAWA (25)", "HERBATA (20)", "SOK (10)", "COLA (5)"]},
            {q: "Drzewo", a: ["DƒÑB (35)", "BRZOZA (25)", "SOSNA (20)", "≈öWIERK (15)", "KLON (5)"]},
            {q: "Ryba", a: ["KARP (40)", "≈öLED≈π (25)", "SZCZUPAK (15)", "PSTRƒÑG (10)", "DORSZ (10)"]},
            {q: "Rzeka", a: ["WIS≈ÅA (65)", "ODRA (20)", "WARTA (10)", "BUG (3)", "SAN (2)"]}
        ]},
        { n: 4, questions: [
            {q: "Czƒô≈õƒá cia≈Ça", a: ["RƒòKA (30)", "G≈ÅOWA (25)", "NOGA (20)", "BRZUCH (15)", "PLECY (10)"]},
            {q: "Mebel", a: ["KRZES≈ÅO (30)", "ST√ì≈Å (25)", "SZAFA (20)", "≈Å√ì≈ªKO (15)", "FOTEL (10)"]},
            {q: "Pisanie", a: ["D≈ÅUGOPIS (45)", "O≈Å√ìWEK (30)", "PI√ìRO (15)", "MAZAK (7)", "KREDKA (3)"]},
            {q: "Stolica", a: ["WARSZAWA (55)", "PARY≈ª (15)", "LONDYN (15)", "PRAGA (10)", "RZYM (5)"]},
            {q: "Planeta", a: ["ZIEMIA (40)", "MARS (30)", "JOWISZ (15)", "WENUS (10)", "SATURN (5)"]}
        ]},
        { n: 5, questions: [
            {q: "S≈Çodkie", a: ["CZEKOLADA (35)", "CIASTKO (25)", "CUKIERKI (20)", "MI√ìD (15)", "LIZAK (5)"]},
            {q: "Warzywo", a: ["MARCHEW (40)", "ZIEMNIAK (30)", "POMIDOR (15)", "OG√ìREK (10)", "CEBULA (5)"]},
            {q: "Narzƒôdzie", a: ["M≈ÅOTEK (45)", "≈öRUBOKRƒòT (25)", "KLUCZ (15)", "PI≈ÅA (10)", "KOMBINERKI (5)"]},
            {q: "Las", a: ["DRZEWA (50)", "GRZYBY (25)", "ZWIERZƒòTA (15)", "MECH (5)", "LI≈öCIE (5)"]},
            {q: "Pogoda", a: ["DESZCZ (35)", "BURZA (30)", "S≈ÅO≈ÉCE (20)", "WIATR (10)", "MIE≈ÅA (5)"]}
        ]},
        { n: 6, questions: [
            {q: "Bia≈Çy nap√≥j", a: ["MLEKO (60)", "KEFIR (15)", "MA≈öLANKA (15)", "JOGURT (10)"]},
            {q: "Garderoba", a: ["KURTKA (30)", "SPODNIE (25)", "KOSZULA (20)", "BUTY (15)", "CZAPKA (10)"]},
            {q: "Szko≈Ça", a: ["≈ÅAWKA (35)", "TABLICA (30)", "ZESZYT (15)", "KSIƒÑ≈ªKA (10)", "PLECAK (10)"]},
            {q: "Dom", a: ["OKNO (40)", "DRZWI (35)", "DACH (15)", "≈öCIANA (10)"]},
            {q: "Elektronika", a: ["TELEFON (50)", "KOMPUTER (25)", "TELEWIZOR (15)", "TABLET (10)"]}
        ]},
        { n: 7, questions: [
            {q: "Transport", a: ["SAMOCH√ìD (40)", "POCIƒÑG (25)", "AUTOBUS (20)", "SAMOLOT (10)", "R√ìWER (5)"]},
            {q: "Mokre", a: ["WODA (55)", "DESZCZ (25)", "OCEAN (10)", "KA≈ÅU≈ªA (10)"]},
            {q: "Muzyka", a: ["ROCK (30)", "POP (30)", "JAZZ (15)", "DISCO POLO (15)", "METAL (10)"]},
            {q: "Taniec", a: ["WALC (35)", "TANGO (25)", "SALSA (20)", "HIP-HOP (15)", "POLONEZ (5)"]},
            {q: "Niebo", a: ["S≈ÅO≈ÉCE (45)", "KSIƒò≈ªYC (30)", "GWIAZDY (15)", "CHMURY (10)"]}
        ]},
        { n: 8, questions: [
            {q: "Praca", a: ["BIURO (35)", "SZKO≈ÅA (25)", "SZPITAL (15)", "BUDOWA (15)", "SKLEP (10)"]},
            {q: "Hobby", a: ["SPORT (30)", "CZYTANIE (25)", "GRY (20)", "PODR√ì≈ªE (15)", "FILMY (10)"]},
            {q: "Budynek", a: ["WIE≈ªOWIEC (50)", "BLOK (20)", "DOM (20)", "KO≈öCI√ì≈Å (10)"]},
            {q: "GorƒÖce", a: ["OGIE≈É (40)", "S≈ÅO≈ÉCE (30)", "PIEKARNIK (15)", "HERBATA (15)"]},
            {q: "Twarde", a: ["KAMIE≈É (45)", "SKA≈ÅA (25)", "BETON (15)", "METAL (15)"]}
        ]},
        { n: 9, questions: [
            {q: "Pora roku", a: ["LATO (60)", "WIOSNA (20)", "ZIMA (15)", "JESIE≈É (5)"]},
            {q: "Obiad", a: ["ZUPA (35)", "KOTLET (30)", "PIEROGI (20)", "MAKARON (10)", "RYBA (5)"]},
            {q: "Bajka", a: ["MYSZKA MIKI (30)", "SHREK (25)", "SMERFY (20)", "KUBU≈ö PUCHATEK (15)", "KR√ìL LEW (10)"]},
            {q: "G√≥ry", a: ["TATRY (70)", "ALPY (15)", "KARPATY (10)", "ANDY (5)"]},
            {q: "Drzewo le≈õne", a: ["SOSNA (45)", "≈öWIERK (25)", "JOD≈ÅA (20)", "MODRZEW (10)"]}
        ]},
        { n: 10, questions: [
            {q: "Zabawka", a: ["MI≈ö (40)", "LALKA (30)", "AUTO (15)", "KLOCKI (10)", "PI≈ÅKA (5)"]},
            {q: "Walka", a: ["BOKS (40)", "KARATE (25)", "JUDO (20)", "ZAPASY (10)", "MMA (5)"]},
            {q: "Kompozytor", a: ["CHOPIN (60)", "BEETHOVEN (20)", "MOZART (15)", "BACH (5)"]},
            {q: "Morze", a: ["BA≈ÅTYCKIE (75)", "≈öR√ìDZIEMNE (15)", "CZERWONE (5)", "MARTWE (5)"]},
            {q: "Szybkie", a: ["BOLID F1 (40)", "FERRARI (30)", "SAMOLOT (20)", "GEPARD (10)"]}
        ]}
        // ... Pozosta≈Çe zestawy analogicznie
    ];

    function connect() {
        const code = document.getElementById('code').value.toUpperCase();
        conn = peer.connect(code);
        conn.on('open', () => { alert("PO≈ÅƒÑCZONO!"); send('FIN'); });
    }

    function send(type, data={}) { if(conn) conn.send({type, ...data}); }

    function setTarget(p, r) {
        activePlayer = p; activeRow = r;
        document.querySelectorAll('.row-final').forEach(el => el.classList.remove('row-active'));
        document.getElementById(`row-${p}-${r}`).classList.add('row-active');
    }

    // FUNKCJA WPISUJƒÑCA ODPOWIED≈π PO KLIKNIƒòCIU W ≈öCIƒÑGƒò
    function autoFill(text, pts) {
        document.getElementById(`f${activePlayer}t${activeRow}`).value = text;
        document.getElementById(`f${activePlayer}p${activeRow}`).value = pts;
    }

    function init() {
        [1, 2].forEach(p => {
            const container = document.getElementById(`g${p}-rows`);
            for(let i=0; i<5; i++) {
                container.innerHTML += `
                    <div class="row-final" id="row-${p}-${i}" onclick="setTarget(${p},${i})">
                        <div class="led" id="led-p${p}-r${i}"></div>
                        <input id="f${p}t${i}" placeholder="ODPOWIED≈π" onfocus="setTarget(${p},${i})">
                        <button onclick="revFA(${p},${i})" class="btn-blue">ODP</button>
                        <input id="f${p}p${i}" type="number" class="input-pts" placeholder="0">
                        <button onclick="revFP(${p},${i})" class="btn-green">OK</button>
                    </div>`;
            }
        });

        const cheatContainer = document.getElementById('cheat-container');
        database.forEach(set => {
            let html = `<div class="cheat-card"><h3>ZESTAW ${set.n}</h3>`;
            set.questions.forEach(item => {
                html += `<div class="q-block"><div class="q-title">${item.q}</div>`;
                item.a.forEach(ans => {
                    html += `<button class="ans-btn" onclick="autoFill('${ans[0]}', ${ans[1]})">${ans[0]} <b>${ans[1]}</b></button>`;
                });
                html += `</div>`;
            });
            html += `</div>`;
            cheatContainer.innerHTML += html;
        });
        setTarget(1, 0); // Startowy kursor
    }

    function revFA(pl, i) { 
        send('SND', {f:'ok'}); 
        send('R_A', {pl, i, t: document.getElementById(`f${pl}t${i}`).value}); 
    }

    function revFP(pl, i) { 
        const pVal = parseInt(document.getElementById(`f${pl}p${i}`).value) || 0; 
        totalF += pVal; 
        document.getElementById('f-total').innerText = totalF;
        send('SND', {f:'final'}); 
        send('R_P', {pl, i, p: pVal, s: totalF}); 
        document.getElementById(`led-p${pl}-r${i}`).classList.add('led-on');
        
        // Automatyczne przej≈õcie do nastƒôpnego pola
        if (activeRow < 4) setTarget(activePlayer, activeRow + 1);
        else if (activePlayer === 1) setTarget(2, 0);
    }

    init();
</script>
</body>
</html>
