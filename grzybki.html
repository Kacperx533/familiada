<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GRZYBEK</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { margin:0; background:#121212; color:white; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; overflow:hidden; font-family: sans-serif; }
        #btn { width:260px; height:260px; border-radius:50%; background:radial-gradient(circle, #ff4757 0%, #b00020 100%); border:10px solid #555; font-size:40px; color:white; font-weight:bold; display:none; cursor: pointer; }
        #btn:disabled { opacity:0.2; filter: grayscale(1); }
        #btn:active:not(:disabled) { transform: translateY(5px); }
        input, select { padding: 15px; margin: 10px; width: 80%; border-radius: 10px; border: none; font-size: 16px; }
        .status { margin-top: 15px; font-size: 18px; color: #f1c40f; }
    </style>
</head>
<body>
    <div id="setup">
        <h2 style="text-align:center">USTAWIENIA</h2>
        <input type="text" id="p-id" placeholder="WPISZ ID PANELU">
        <select id="team"><option value="A">DRUŻYNA A</option><option value="B">DRUŻYNA B</option></select>
        <button onclick="connect()" style="padding:20px; width:80%; background:#2e7d32; color:white; border:none; border-radius:10px; font-weight:bold; font-size:18px;">POŁĄCZ</button>
    </div>
    <button id="btn" onclick="buzz()" disabled>STOP!</button>
    <p id="stat" class="status">CZEKAJ NA START...</p>

    <script>
        let peer = new Peer(), conn, team;
        function connect() {
            team = document.getElementById('team').value;
            const pId = document.getElementById('p-id').value;
            if(!pId) return alert("Wpisz ID Panelu!");
            conn = peer.connect(pId);
            conn.on('open', () => {
                document.getElementById('setup').style.display='none';
                document.getElementById('btn').style.display='block';
                document.getElementById('stat').innerText="POŁĄCZONO! CZEKAJ NA RUNDĘ.";
            });
            conn.on('data', m => {
                if(m.type === 'UNLOCK') { document.getElementById('btn').disabled=false; document.getElementById('stat').innerText="GRAJ!"; }
                if(m.type === 'LOCK') { document.getElementById('btn').disabled=true; document.getElementById('stat').innerText="ZABLOKOWANE"; }
            });
        }
        function buzz() { conn.send({type:'BUZZ', team:team}); document.getElementById('btn').disabled=true; document.getElementById('stat').innerText="WYŚŁANO!"; }
    </script>
</body>
</html>
