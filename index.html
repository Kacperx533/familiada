<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>FAMILIADA PRO - TV</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Inter:wght@900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        :root { --gold: #f1c40f; --blue: #1e3799; --dark: #050520; --red: #ff4757; }
        body { background: var(--dark); color: white; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; text-transform: uppercase; }
        #id-screen { position: fixed; inset: 0; background: radial-gradient(circle, #1e3799 0%, #050520 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; }
        .id-value { font-size: 50px; background: white; color: black; padding: 15px 40px; border-radius: 15px; margin-top: 15px; font-weight: 900; }
        #game-screen { display: none; flex-direction: column; height: 100vh; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 20px 60px; background: rgba(0,0,0,0.6); border-bottom: 5px solid var(--gold); }
        .score { font-family: 'VT323'; font-size: 110px; border: 4px solid white; padding: 0 30px; background: black; min-width: 140px; text-align: center; }
        .team-name { font-size: 30px; color: var(--gold); margin-bottom: 5px; width: 300px; }
        .main-area { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #question { font-size: 40px; margin-bottom: 40px; text-align: center; width: 80%; }
        .board { width: 1000px; display: grid; gap: 12px; }
        .slot { background: linear-gradient(180deg, #1e3799 0%, #0a0a2e 100%); border: 3px solid #487eb0; height: 75px; display: flex; align-items: center; justify-content: space-between; padding: 0 40px; font-size: 45px; border-radius: 8px; }
        .slot.revealed { background: linear-gradient(180deg, var(--gold) 0%, #d4ac0d 100%); color: black; border-color: white; }
        .pts { font-family: 'VT323'; font-size: 55px; border-left: 2px solid rgba(255,255,255,0.3); padding-left: 20px; min-width: 60px; text-align: right; }
        #strike { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); align-items: center; justify-content: center; z-index: 2000; }
        #strike span { color: var(--red); font-size: 600px; font-weight: 900; }
    </style>
</head>
<body>
    <div id="id-screen">
        <div style="color: var(--gold); letter-spacing: 3px;">ADRES TWOJEGO STUDIA:</div>
        <div class="id-value" id="display-id">ŁĄCZENIE...</div>
        <p id="err-msg" style="color:red; display:none; margin-top:20px;">Błąd! Zmień nazwę ID w kodzie.</p>
    </div>

    <div id="game-screen">
        <div class="top-bar">
            <div><div id="nameA" class="team-name">DRUŻYNA A</div><div id="scoreA" class="score">0</div></div>
            <div style="text-align: center;"><div style="letter-spacing: 8px; font-size: 20px;">FAMILIADA</div></div>
            <div style="text-align: right;"><div id="nameB" class="team-name">DRUŻYNA B</div><div id="scoreB" class="score">0</div></div>
        </div>
        <div class="main-area">
            <div id="question">CZEKAM NA PYTANIE...</div>
            <div class="board" id="board-slots"></div>
        </div>
    </div>
    <div id="strike"><span>X</span></div>

    <script>
        // TUTAJ WPISZ SWOJĄ UNIKALNĄ NAZWĘ (DODAJ NP. SWOJE NAZWISKO)
        const MOJE_ID = 'FAMILIADA-STUDIO-PRO-2026-XYZ'; 
        
        const peer = new Peer(MOJE_ID);
        peer.on('open', id => document.getElementById('display-id').innerText = id);
        peer.on('error', () => document.getElementById('err-msg').style.display = 'block');

        peer.on('connection', conn => {
            conn.on('data', m => {
                document.getElementById('id-screen').style.display = 'none';
                document.getElementById('game-screen').style.display = 'flex';
                if(m.type === 'SETUP') {
                    document.getElementById('question').innerText = m.q;
                    const b = document.getElementById('board-slots'); b.innerHTML = '';
                    m.a.forEach((ans, i) => b.innerHTML += `<div class="slot" id="s-${i}"><div style="color:#576574">${i+1}. ........................</div><div class="pts">--</div></div>`);
                }
                if(m.type === 'REVEAL') {
                    const s = document.getElementById(`s-${m.index}`);
                    s.classList.add('revealed');
                    s.innerHTML = `<div>${m.index+1}. ${m.text}</div><div class="pts">${m.pts}</div>`;
                    new Audio('https://www.myinstants.com/media/sounds/ding-sound-effect_2.mp3').play();
                }
                if(m.type === 'STRIKE') {
                    const x = document.getElementById('strike'); x.style.display = 'flex';
                    new Audio('https://www.myinstants.com/media/sounds/incorrect_6.mp3').play();
                    setTimeout(() => x.style.display = 'none', 1200);
                }
                if(m.type === 'UPDATE') {
                    document.getElementById('scoreA').innerText = m.scA;
                    document.getElementById('scoreB').innerText = m.scB;
                    document.getElementById('nameA').innerText = m.nameA;
                    document.getElementById('nameB').innerText = m.nameB;
                }
            });
        });
    </script>
</body>
</html>
