<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL STUDIO PRO</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --accent: #8b5cf6; --success: #10b981; --danger: #ef4444; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; padding: 15px; }
        .card { background: var(--card); border-radius: 15px; padding: 15px; margin-bottom: 10px; border: 1px solid #334155; }
        button { border: none; border-radius: 8px; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; width: 100%; color: white; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        input, select { width: 100%; padding: 12px; background: #0f172a; border: 1px solid #334155; color: white; border-radius: 8px; box-sizing: border-box; margin-top: 5px; }
        .ans-btn { background: #334155; text-align: left; margin-bottom: 5px; display: flex; justify-content: space-between; }
        .ans-btn:hover { background: var(--accent); }
        .btn-strike { background: var(--danger); height: 100px; font-size: 40px; margin-top: 10px; }
    </style>
</head>
<body>

    <div id="setup" class="card">
        <input type="text" id="tv-id" placeholder="WPISZ ID Z TELEWIZORA">
        <button onclick="connect()" style="background: var(--accent); margin-top:10px;">POŁĄCZ STUDIO</button>
    </div>

    <div id="controls" style="display:none">
        <div class="card grid">
            <div>
                <label>DRUŻYNA A</label>
                <input type="text" id="nA" value="DRUŻYNA A" onchange="sync()">
                <input type="number" id="sA" value="0" onchange="sync()">
            </div>
            <div>
                <label>DRUŻYNA B</label>
                <input type="text" id="nB" value="DRUŻYNA B" onchange="sync()">
                <input type="number" id="sB" value="0" onchange="sync()">
            </div>
        </div>

        <div class="card">
            <label>WYBIERZ PYTANIE (BAZA 30)</label>
            <select id="q-select" onchange="loadQ()"></select>
            <button onclick="sendQ()" style="background: var(--success); margin-top:10px;">WYŚLIJ NA TABLICĘ</button>
        </div>

        <div id="answers" class="card"></div>

        <button class="btn-strike" onclick="strike()">✖</button>

        <div class="card grid">
            <button onclick="timer(20)" style="background: #576574;">TIMER 20s</button>
            <button onclick="timer(0)" style="background: #222f3e;">STOP</button>
        </div>
    </div>

    <script>
        let peer = new Peer(), conn, currentQ;
        const db = [
            { q: "Więcej niż jedno zwierzę?", a: [["Owce", 32], ["Lama", 21], ["Stado", 15], ["Para", 5]] },
            { q: "Polska potrawa wigilijna?", a: [["Barszcz", 45], ["Karp", 30], ["Pierogi", 15], ["Uszka", 8]] },
            { q: "Przedmiot szkolny?", a: [["Matematyka", 40], ["Polski", 25], ["WF", 15], ["Historia", 10]] },
            { q: "Zwierzę na literę K?", a: [["Kot", 48], ["Koń", 22], ["Krowa", 15], ["Kangur", 5]] },
            { q: "Co pijemy rano?", a: [["Kawa", 50], ["Herbata", 25], ["Woda", 10], ["Mleko", 8]] },
            { q: "Co można robić w lesie?", a: [["Spacerować", 45], ["Zbierać grzyby", 35], ["Biegać", 10]] },
            { q: "Owoc cytrusowy?", a: [["Cytryna", 40], ["Pomarańcza", 35], ["Mandarynka", 15]] },
            { q: "Coś, co ma kółka?", a: [["Samochód", 45], ["Rower", 25], ["Wózek", 15], ["Hulajnoga", 10]] },
            { q: "Element pogody?", a: [["Deszcz", 40], ["Słońce", 35], ["Wiatr", 15], ["Śnieg", 10]] },
            { q: "Czym podróżujemy?", a: [["Samochód", 40], ["Pociąg", 25], ["Autobus", 15], ["Samolot", 15]] },
            { q: "Zajęcie na wakacjach?", a: [["Pływanie", 35], ["Opalanie", 30], ["Zwiedzanie", 20]] },
            { q: "Kwiat na randkę?", a: [["Róża", 60], ["Tulipan", 20], ["Goździk", 10]] },
            { q: "Coś słodkiego?", a: [["Czekolada", 35], ["Lody", 30], ["Ciasto", 20], ["Cukierki", 10]] },
            { q: "Dyscyplina sportowa?", a: [["Piłka nożna", 45], ["Siatkówka", 20], ["Bieganie", 15]] },
            { q: "Co kładziemy na kanapkę?", a: [["Szynka", 40], ["Ser", 35], ["Pomidor", 15], ["Masło", 5]] },
            { q: "Coś, co lata?", a: [["Ptak", 45], ["Samolot", 35], ["Mucha", 10], ["Balon", 5]] },
            { q: "Część garderoby?", a: [["Spodnie", 35], ["Koszulka", 30], ["Buty", 20], ["Kurtka", 10]] },
            { q: "Miasto w Polsce?", a: [["Warszawa", 40], ["Kraków", 30], ["Gdańsk", 15], ["Wrocław", 10]] },
            { q: "Coś czerwonego?", a: [["Pomidor", 40], ["Serce", 25], ["Krew", 15], ["Róża", 10]] },
            { q: "Instrument muzyczny?", a: [["Gitara", 40], ["Pianino", 30], ["Perkusja", 15]] },
            { q: "Zawód medyczny?", a: [["Lekarz", 50], ["Pielęgniarka", 30], ["Ratownik", 10]] },
            { q: "Drzewo liściaste?", a: [["Dąb", 40], ["Brzoza", 30], ["Klon", 15], ["Buk", 5]] },
            { q: "Gdzie trzymamy pieniądze?", a: [["Portfel", 45], ["Bank", 35], ["Skarbonka", 10]] },
            { q: "Coś, co świeci?", a: [["Słońce", 45], ["Żarówka", 30], ["Księżyc", 15]] },
            { q: "Ssak wodny?", a: [["Delfin", 45], ["Wieloryb", 35], ["Foka", 15]] },
            { q: "Coś do pisania?", a: [["Długopis", 45], ["Ołówek", 30], ["Marker", 15]] },
            { q: "Dzień tygodnia?", a: [["Sobota", 40], ["Niedziela", 30], ["Piątek", 15], ["Poniedziałek", 10]] },
            { q: "Co kupujemy w piekarni?", a: [["Chleb", 50], ["Bułki", 30], ["Pączek", 10], ["Drożdżówka", 10]] },
            { q: "Zabytek w Polsce?", a: [["Wawel", 40], ["Zamek Królewski", 25], ["Malbork", 15]] },
            { q: "Coś, co rośnie w ogrodzie?", a: [["Trawa", 35], ["Kwiaty", 30], ["Jabłoń", 20], ["Marchew", 15]] }
        ];

        window.onload = () => {
            const sel = document.getElementById('q-select');
            db.forEach((item, i) => sel.innerHTML += `<option value="${i}">${item.q}</option>`);
            loadQ();
        };

        function connect() {
            conn = peer.connect(document.getElementById('tv-id').value);
            conn.on('open', () => { document.getElementById('setup').style.display='none'; document.getElementById('controls').style.display='block'; sync(); });
        }

        function loadQ() {
            currentQ = db[document.getElementById('q-select').value];
            const div = document.getElementById('answers'); div.innerHTML = "";
            currentQ.a.forEach((a, i) => {
                div.innerHTML += `<button class="ans-btn" onclick="reveal(${i})"><span>${a[0]}</span> <span>${a[1]}</span></button>`;
            });
        }

        function sendQ() { conn.send({type:'SETUP', q:currentQ.q, a:currentQ.a.map(x=>({t:x[0], p:x[1]}))}); }
        function reveal(i) { conn.send({type:'REVEAL', index:i, text:currentQ.a[i][0], pts:currentQ.a[i][1]}); }
        function strike() { conn.send({type:'STRIKE'}); }
        function sync() { conn.send({type:'UPDATE', scA:document.getElementById('sA').value, scB:document.getElementById('sB').value, nameA:document.getElementById('nA').value, nameB:document.getElementById('nB').value}); }
        
        function timer(s) {
            if(s === 0) { conn.send({type:'TIMER', visible:false}); return; }
            let sec = s;
            conn.send({type:'TIMER', val:sec, visible:true});
            let interval = setInterval(() => {
                sec--;
                conn.send({type:'TIMER', val:sec, visible:true});
                if(sec <= 0) { clearInterval(interval); new Audio('https://www.myinstants.com/media/sounds/incorrect_6.mp3').play(); }
            }, 1000);
        }
    </script>
</body>
</html>
