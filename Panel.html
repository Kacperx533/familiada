<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PANEL STEROWANIA</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --accent: #8b5cf6; --success: #10b981; --danger: #ef4444; --gold: #f59e0b; --text: #f8fafc; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); padding: 10px; margin: 0; }
        .card { background: var(--card); border-radius: 12px; padding: 15px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.05); }
        h4 { margin: 0 0 10px 0; font-size: 12px; color: #94a3b8; text-transform: uppercase; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn { border: none; border-radius: 8px; padding: 12px; font-weight: bold; cursor: pointer; width: 100%; color: white; }
        .btn-p { background: var(--accent); }
        .btn-s { background: var(--success); }
        .btn-d { background: var(--danger); }
        .btn-dark { background: #334155; }
        input, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: white; margin-bottom: 10px; box-sizing: border-box; }
        .ans-row { display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 8px; margin-top: 5px; }
        .active-team { outline: 3px solid var(--gold); }
    </style>
</head>
<body>
    <div id="setup" class="card">
        <input type="text" id="tv-id" placeholder="ID Z EKRANU TV">
        <button onclick="connectToTV()" class="btn btn-p">PO≈ÅƒÑCZ Z TV</button>
    </div>

    <div id="controls" style="display:none">
        <div class="card">
            <h4>Multimedia</h4>
            <div class="grid">
                <button onclick="sendToTV({type:'START_INTRO'})" class="btn btn-dark">üé¨ CZO≈Å√ìWKA</button>
                <button onclick="sendToTV({type:'START_OUTRO'})" class="btn btn-dark">üé¨ NAPISY</button>
            </div>
        </div>

        <div class="card">
            <h4>Rundy</h4>
            <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:5px; margin-bottom:10px">
                <button onclick="setR(1)" class="btn btn-dark">x1</button>
                <button onclick="setR(2)" class="btn btn-dark">x2</button>
                <button onclick="setR(3)" class="btn btn-dark">x3</button>
                <button onclick="setR('F')" class="btn btn-p">FIN</button>
            </div>
        </div>

        <div class="card">
            <h4>Baza 50 Pyta≈Ñ</h4>
            <select id="q-sel" onchange="prepQ()"></select>
            <button onclick="sendQ()" class="btn btn-p">WY≈öLIJ NA TABLICƒò</button>
            <div id="ans-list"></div>
        </div>

        <div class="card">
            <h4>Punkty i B≈Çƒôdy</h4>
            <div class="grid">
                <button id="btnA" onclick="setTeam('A')" class="btn btn-d">TEAM A</button>
                <button id="btnB" onclick="setTeam('B')" class="btn btn-p" style="background:#2e86de">TEAM B</button>
            </div>
            <button onclick="doStrike()" class="btn btn-d" style="font-size:40px; margin-top:10px; height:80px">‚úñ</button>
            <div class="grid" style="margin-top:10px">
                <div><label style="font-size:10px">PUNKTY A</label><input type="number" id="scA" value="0" onchange="sync()"></div>
                <div><label style="font-size:10px">PUNKTY B</label><input type="number" id="scB" value="0" onchange="sync()"></div>
            </div>
            <button onclick="strikes={A:0,B:0}; sync();" class="btn btn-dark" style="font-size:10px; margin-top:5px">RESET B≈ÅƒòD√ìW X</button>
        </div>
    </div>

    <script>
        const db = [
            { q: "Przedmiot szkolny z kalkulatorem?", a: [["Matematyka", 55], ["Fizyka", 25], ["Chemia", 15], ["Geografia", 5]] },
            { q: "Co jest w pi√≥rniku?", a: [["D≈Çugopis", 40], ["O≈Ç√≥wek", 25], ["Gumka", 15], ["Linijka", 10], ["Temper√≥wka", 10]] },
            { q: "Co ucze≈Ñ robi na przerwie?", a: [["Je ≈õniadanie", 35], ["Rozmawia", 30], ["Telefon", 20], ["Biega", 10]] },
            { q: "Miejsce w szkole poza salƒÖ?", a: [["Korytarz", 35], ["Sto≈Ç√≥wka", 25], ["Biblioteka", 20], ["Szatnia", 15]] },
            { q: "Zwierzƒô na literƒô K?", a: [["Kot", 50], ["Ko≈Ñ", 25], ["Krowa", 15], ["Kura", 10]] },
            { q: "Dyscyplina na WF-ie?", a: [["Pi≈Çka no≈ºna", 40], ["Siatk√≥wka", 30], ["Biegi", 20], ["Gimnastyka", 10]] },
            { q: "Co pijemy na gorƒÖco?", a: [["Herbata", 45], ["Kawa", 35], ["Kakao", 20]] },
            { q: "Owoc cytrusowy?", a: [["Cytryna", 45], ["Pomara≈Ñcza", 30], ["Mandarynka", 25]] },
            { q: "Pa≈Ñstwo sƒÖsiadujƒÖce z PolskƒÖ?", a: [["Niemcy", 40], ["Czechy", 25], ["S≈Çowacja", 20], ["Ukraina", 15]] },
            { q: "Co ≈õwieci na niebie?", a: [["S≈Ço≈Ñce", 55], ["Ksiƒô≈ºyc", 30], ["Gwiazdy", 15]] },
            { q: "Rodzaj zupy?", a: [["Pomidorowa", 45], ["Ros√≥≈Ç", 35], ["Og√≥rkowa", 20]] },
            { q: "Imiƒô na literƒô A?", a: [["Anna", 40], ["Alicja", 30], ["Adam", 20], ["Agata", 10]] },
            { q: "Marka samochodu?", a: [["Toyota", 35], ["BMW", 25], ["Audi", 20], ["Ford", 20]] },
            { q: "Z czym jemy pierogi?", a: [["Z cebulkƒÖ", 45], ["Ze ≈õmietanƒÖ", 35], ["Z owocami", 20]] },
            { q: "Co ro≈õnie w lesie?", a: [["Drzewa", 45], ["Grzyby", 35], ["Jagody", 20]] },
            { q: "Czƒô≈õƒá twarzy?", a: [["Oczy", 40], ["Nos", 30], ["Usta", 20], ["Uszy", 10]] },
            { q: "Metal szlachetny?", a: [["Z≈Çoto", 60], ["Srebro", 30], ["Platyna", 10]] },
            { q: "Pojazd bez silnika?", a: [["Rower", 55], ["Hulajnoga", 35], ["W√≥z", 10]] },
            { q: "Co ma skrzyd≈Ça (nie ptak)?", a: [["Samolot", 50], ["Mucha", 30], ["Motyl", 20]] },
            { q: "Kolor tƒôczy?", a: [["Czerwony", 40], ["Niebieski", 30], ["Zielony", 30]] },
            { q: "Mebelek w salonie?", a: [["Kanapa", 45], ["Fotel", 35], ["St√≥≈Ç", 20]] },
            { q: "Instrument strunowy?", a: [["Gitara", 50], ["Skrzypce", 35], ["Harfa", 15]] },
            { q: "Co mo≈ºna zbieraƒá?", a: [["Grzyby", 40], ["Znaczki", 30], ["Monety", 20], ["Karty", 10]] },
            { q: "Zwierzƒô le≈õne w Polsce?", a: [["Sarna", 40], ["Dzik", 30], ["Lis", 20], ["Jele≈Ñ", 10]] },
            { q: "Gatunek filmu?", a: [["Komedia", 45], ["Horror", 35], ["Akcja", 20]] },
            { q: "Portal spo≈Çeczno≈õciowy?", a: [["TikTok", 40], ["Instagram", 30], ["Facebook", 30]] },
            { q: "Co robimy rano?", a: [["Myjemy zƒôby", 40], ["Pijemy kawƒô", 35], ["≈öniadanie", 25]] },
            { q: "Czƒô≈õƒá komputera?", a: [["Monitor", 40], ["Myszka", 30], ["Klawiatura", 30]] },
            { q: "Dzie≈Ñ tygodnia na S?", a: [["Sobota", 65], ["≈öroda", 35]] },
            { q: "Co ma ko≈Ça?", a: [["Samoch√≥d", 45], ["Rower", 35], ["PociƒÖg", 20]] },
            { q: "UrzƒÖdzenie w kuchni?", a: [["Lod√≥wka", 45], ["Kuchenka", 35], ["Czajnik", 20]] },
            { q: "Co kupujemy w tubce?", a: [["Pasta do zƒôb√≥w", 60], ["Krem", 30], ["Klej", 10]] },
            { q: "Rzeka w Polsce?", a: [["Wis≈Ça", 70], ["Odra", 20], ["Warta", 10]] },
            { q: "Co kojarzy siƒô z zimƒÖ?", a: [["≈önieg", 50], ["Mr√≥z", 30], ["Sanki", 20]] },
            { q: "Warzywo do sa≈Çatki?", a: [["Pomidor", 40], ["Og√≥rek", 35], ["Sa≈Çata", 25]] },
            { q: "Z czym jemy kanapkƒô?", a: [["Z serem", 40], ["Z szynkƒÖ", 35], ["Z d≈ºemem", 25]] },
            { q: "Drzewo li≈õciaste?", a: [["DƒÖb", 50], ["Brzoza", 30], ["Klon", 20]] },
            { q: "Gdzie na wakacje?", a: [["Morze", 55], ["G√≥ry", 35], ["Jezioro", 10]] },
            { q: "Ptak, kt√≥ry nie lata?", a: [["Stru≈õ", 60], ["Pingwin", 40]] },
            { q: "Co mo≈ºna otworzyƒá?", a: [["Drzwi", 45], ["Okno", 35], ["KsiƒÖ≈ºkƒô", 20]] },
            { q: "Zaw√≥d w mundurze?", a: [["Policjant", 50], ["Stra≈ºak", 40], ["≈ªo≈Çnierz", 10]] },
            { q: "Polska potrawa?", a: [["Pierogi", 50], ["Bigos", 30], ["Schabowy", 20]] },
            { q: "Co jest w pi√≥rniku?", a: [["D≈Çugopis", 50], ["Gumka", 30], ["Linijka", 20]] },
            { q: "Zwierzƒô na farmie?", a: [["Krowa", 45], ["≈öwinia", 35], ["Kura", 20]] },
            { q: "Co ≈õwieci?", a: [["S≈Ço≈Ñce", 60], ["≈ªar√≥wka", 30], ["Latarka", 10]] },
            { q: "Sport z pi≈ÇkƒÖ?", a: [["No≈ºna", 50], ["Siatk√≥wka", 30], ["Koszyk√≥wka", 20]] },
            { q: "Co ma rogi?", a: [["Krowa", 60], ["Diabe≈Ç", 30], ["Koza", 10]] },
            { q: "Kolor flagi Polski?", a: [["Bia≈Çy", 50], ["Czerwony", 50]] },
            { q: "Co w plecaku?", a: [["KsiƒÖ≈ºki", 50], ["Zeszyty", 30], ["Picie", 20]] },
            { q: "Imiƒô mƒôskie na M?", a: [["Micha≈Ç", 40], ["Marek", 30], ["Marcin", 30]] }
        ];

        let peer = new Peer(), tvConn, activeTeam, strikes = {A:0, B:0}, multiplier = 1, currentA = [];

        function connectToTV() {
            tvConn = peer.connect(document.getElementById('tv-id').value);
            tvConn.on('open', () => {
                document.getElementById('setup').style.display='none';
                document.getElementById('controls').style.display='block';
                const s = document.getElementById('q-sel');
                db.forEach((d,i) => s.innerHTML += `<option value="${i}">${d.q}</option>`);
            });
        }
        function sendToTV(m) { if(tvConn) tvConn.send(m); }
        function setR(r) { multiplier = (typeof r==='number')?r:1; sendToTV({type:'NEXT_ROUND', round:r}); strikes={A:0,B:0}; sync(); }
        function prepQ() {
            const d = db[document.getElementById('q-sel').value]; currentA = d.a;
            const l = document.getElementById('ans-list'); l.innerHTML = "";
            d.a.forEach((a, i) => { l.innerHTML += `<div class="ans-row"><span>${a[0]} (${a[1]})</span><button onclick="reveal(${i})" class="btn btn-s" style="width:60px">OK</button></div>`; });
        }
        function sendQ() {
            const d = db[document.getElementById('q-sel').value];
            sendToTV({type:'SETUP', q: d.q, a: d.a.map(x=>({t:x[0], p:x[1]}))});
        }
        function reveal(i) {
            let pts = currentA[i][1] * multiplier; sendToTV({type:'REVEAL', index:i, text:currentA[i][0], pts:pts});
            if(activeTeam) { const el = document.getElementById('sc'+activeTeam); el.value = parseInt(el.value) + pts; sync(); }
        }
        function doStrike() { sendToTV({type:'STRIKE'}); if(activeTeam) strikes[activeTeam]++; sync(); }
        function setTeam(t) { activeTeam = t; document.getElementById('btnA').classList.toggle('active-team', t==='A'); document.getElementById('btnB').classList.toggle('active-team', t==='B'); }
        function sync() { sendToTV({type:'UPDATE', scA:document.getElementById('scA').value, scB:document.getElementById('scB').value, strikes:strikes}); }
    </script>
</body>
</html>
