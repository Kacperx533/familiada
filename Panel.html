<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL STEROWANIA</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; padding: 20px; display: grid; grid-template-columns: 380px 1fr; gap: 20px; }
        .card { background: #2a2a2a; padding: 20px; border-radius: 12px; border-top: 4px solid gold; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        h3 { color: gold; text-transform: uppercase; font-size: 14px; letter-spacing: 1px; margin-top: 0; }
        button { width: 100%; padding: 12px; margin: 4px 0; cursor: pointer; border: none; border-radius: 6px; font-weight: bold; transition: 0.2s; }
        button:hover { filter: brightness(1.2); }
        
        .btn-blue { background: #007bff; color: white; }
        .btn-red { background: #dc3545; color: white; }
        .btn-green { background: #28a745; color: white; }
        .btn-grey { background: #444; color: #ccc; }
        .btn-gold { background: gold; color: black; }

        .strike-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
        input { width: 100%; padding: 12px; background: #000; color: #fff; border: 1px solid #444; border-radius: 6px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="card">
            <h3>1. PO≈ÅƒÑCZENIE</h3>
            <input type="text" id="tv-id" placeholder="Wklej ID z ekranu TV">
            <button class="btn-green" onclick="connect()">PO≈ÅƒÑCZ SYSTEMY</button>
        </div>

        <div class="card">
            <h3>2. MULTIMEDIA</h3>
            <button class="btn-blue" style="font-size: 16px;" onclick="send({type:'INTRO'})">üé¨ ODTW√ìRZ CZO≈Å√ìWKƒò</button>
            <div class="strike-grid">
                <button class="btn-grey" onclick="send({type:'SOUND', file:'round'})">üéµ MUZYKA RUNDY</button>
                <button class="btn-grey" onclick="send({type:'SOUND', file:'final'})">üéµ MUZYKA FINA≈ÅU</button>
            </div>
            <div class="strike-grid">
                <button class="btn-green" style="background:#1e7e34" onclick="send({type:'SOUND', file:'ok'})">‚úîÔ∏è D≈πWIƒòK OK</button>
                <button class="btn-red" style="background:#9c1c28" onclick="send({type:'SOUND', file:'bad'})">‚ùå D≈πWIƒòK B≈ÅƒÑD</button>
            </div>
        </div>

        <div class="card" style="border-top-color: #ff3333;">
            <h3>3. B≈ÅƒòDY (WYBIERZ DRU≈ªYNƒò)</h3>
            <div class="strike-grid">
                <div style="text-align: center; color: #00a2ff; font-weight: bold;">NIEBIESCY</div>
                <div style="text-align: center; color: #ff3333; font-weight: bold;">CZERWONI</div>
                
                <button class="btn-blue" onclick="send({type:'STRIKE', n:1, team:'blue'})">X</button>
                <button class="btn-red" onclick="send({type:'STRIKE', n:1, team:'red'})">X</button>
                
                <button class="btn-blue" onclick="send({type:'STRIKE', n:2, team:'blue'})">XX</button>
                <button class="btn-red" onclick="send({type:'STRIKE', n:2, team:'red'})">XX</button>
                
                <button class="btn-blue" onclick="send({type:'STRIKE', n:3, team:'blue'})">XXX</button>
                <button class="btn-red" onclick="send({type:'STRIKE', n:3, team:'red'})">XXX</button>
            </div>
        </div>
    </div>

    <div class="main">
        <div class="card">
            <h3>4. PYTANIA I PUNKTY</h3>
            <select id="q-sel" onchange="loadQ()" style="width:100%; padding:10px; background:#000; color:white; margin-bottom:10px;"></select>
            <button class="btn-gold" style="height: 50px;" onclick="sendQ()">WY≈öLIJ PYTANIE NA TABLICƒò</button>
            <div id="ans-box" style="margin-top: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;"></div>
        </div>

        <div class="card">
            <h3>SUMA PUNKT√ìW W RUNDZIE</h3>
            <div style="font-size: 60px; color: gold; text-align: center;" id="score-val">0</div>
            <button class="btn-grey" onclick="resetScore()">WYZERUJ LICZNIK</button>
        </div>
    </div>

    <script>
        const DB = [
            {q: "Co mo≈ºna robiƒá na pla≈ºy?", a: [["OPALAƒÜ SIƒò", 40], ["KƒÑPAƒÜ SIƒò", 30], ["GRAƒÜ W PI≈ÅKƒò", 20], ["BUDOWAƒÜ ZAMKI", 10]]},
            {q: "Przedmiot szkolny?", a: [["MATEMATYKA", 45], ["WF", 25], ["POLSKI", 20], ["PLASTYKA", 10]]}
        ];
        
        let conn, peer = new Peer(), total = 0;

        window.onload = () => {
            const s = document.getElementById('q-sel');
            DB.forEach((x, i) => s.innerHTML += `<option value="${i}">${i+1}. ${x.q}</option>`);
            loadQ();
        };

        function connect() {
            conn = peer.connect(document.getElementById('tv-id').value);
            conn.on('open', () => alert("PO≈ÅƒÑCZONO Z TABLICƒÑ!"));
        }

        function loadQ() {
            const q = DB[document.getElementById('q-sel').value];
            const box = document.getElementById('ans-box'); box.innerHTML = '';
            q.a.forEach((x, i) => {
                const b = document.createElement('button');
                b.style.background = '#333'; b.style.color = 'white';
                b.innerText = `${x[0]} (${x[1]})`;
                b.onclick = () => { total += x[1]; update(); send({type:'REV', idx:i}); b.style.background = '#28a745'; };
                box.appendChild(b);
            });
        }

        function sendQ() {
            total = 0; update();
            const q = DB[document.getElementById('q-sel').value];
            send({type:'SETUP', ans: q.a.map(x=>({t:x[0], p:x[1]}))});
            loadQ();
        }

        function send(d) { if(conn) conn.send(d); }
        function update() { document.getElementById('score-val').innerText = total; send({type:'SCORE', s:total}); }
        function resetScore() { total = 0; update(); }
    </script>
</body>
</html>
