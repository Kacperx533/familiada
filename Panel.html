<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL FAMILIADA - 50 ZESTAW√ìW</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; }
        .card { background: #222; padding: 15px; border-radius: 8px; border-top: 4px solid gold; margin-bottom: 15px; }
        button { padding: 10px; cursor: pointer; font-weight: bold; width: 100%; margin: 3px 0; }
        .gold { background: gold; border: none; }
        .blue { background: #0055ff; color: white; border: none; }
        .red { background: #ff0044; color: white; border: none; }
        input, select { width: 100%; padding: 10px; background: #000; color: #fff; border: 1px solid #444; margin: 5px 0; }
        #preview { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
    </style>
</head>
<body>
    <div>
        <div class="card">
            <h3>PO≈ÅƒÑCZENIE</h3>
            <input type="text" id="tv-id" placeholder="Wpisz ID z ekranu TV">
            <button class="gold" onclick="connect()">PO≈ÅƒÑCZ Z TABLICƒÑ</button>
        </div>

        <div class="card">
            <h3>MULTIMEDIA</h3>
            <button onclick="send({type:'INTRO'})">üé¨ CZO≈Å√ìWKA + AUDIO</button>
            <button class="blue" onclick="send({type:'STRIKE', team:'A'})">‚ùå B≈ÅƒÑD LEWA</button>
            <button class="red" onclick="send({type:'STRIKE', team:'B'})">‚ùå B≈ÅƒÑD PRAWA</button>
            <h2 id="scr-disp" style="text-align:center">PUNKTY: 0</h2>
            <button onclick="resetScr()">ZERUJ PUNKTY RUNDY</button>
        </div>

        <div class="card">
            <h3>TRYB FINA≈ÅU</h3>
            <button class="red" onclick="send({type:'FINAL_MODE'})">AKTYWUJ FINA≈Å NA TV</button>
            <div style="display:flex; gap:5px">
                <input type="text" id="ft" placeholder="S≈Çowo">
                <input type="number" id="fp" placeholder="Pkt">
            </div>
            <div style="display:flex; gap:5px">
                <button onclick="revF(1)">GRACZ 1</button>
                <button onclick="revF(2)">GRACZ 2</button>
            </div>
            <select id="fi"><option value="0">Pyt 1</option><option value="1">Pyt 2</option><option value="2">Pyt 3</option><option value="3">Pyt 4</option><option value="4">Pyt 5</option></select>
        </div>
    </div>

    <div>
        <div class="card">
            <h3>BAZA 50 PYTA≈É</h3>
            <select id="r-mult"><option value="1">RUNDA 1 (X1)</option><option value="2">RUNDA 2 (X1)</option><option value="3">RUNDA 3 (X2)</option><option value="4">RUNDA 4 (X3)</option></select>
            <select id="q-list" onchange="showQ()"></select>
            <button class="gold" onclick="setupQ()">WY≈öLIJ NA TABLICƒò</button>
            <div id="preview"></div>
        </div>
    </div>

    <script>
        const db = [
            {q:"Przedmiot szkolny?", a:[["MATEMATYKA",45],["POLSKI",25],["WF",15],["HISTORIA",10],["BIOLOGIA",5]]},
            {q:"Co robimy na przerwie?", a:[["JEMY",40],["GADAMY",30],["TELEFON",20],["BIEGAMY",10]]},
            {q:"W plecaku?", a:[["ZESZYT",50],["KSIƒÑ≈ªKA",20],["PI√ìRNIK",15],["KANAPKA",10]]},
            {q:"Zwierzƒô na K?", a:[["KOT",50],["KO≈É",20],["KROWA",15],["KANGUR",10]]},
            {q:"Kolor tƒôczy?", a:[["CZERWONY",30],["NIEBIESKI",25],["ZIELONY",20],["≈ª√ì≈ÅTY",15]]},
            {q:"Pojazd?", a:[["SAMOCH√ìD",40],["ROWER",30],["AUTOBUS",20],["MOTOCYKL",10]]},
            {q:"Dyscyplina sportu?", a:[["PI≈ÅKA NO≈ªNA",50],["SIATK√ìWKA",20],["BIEGANIE",15],["P≈ÅYWANIE",10]]},
            {q:"Owoc?", a:[["JAB≈ÅKO",45],["BANAN",25],["TRUSKAWKA",15],["GRUSZKA",10]]},
            {q:"Mebel?", a:[["KRZES≈ÅO",40],["ST√ì≈Å",30],["SZAFA",20],["≈Å√ì≈ªKO",10]]},
            {q:"Instrument?", a:[["GITARA",40],["PIANINO",30],["SKRZYPCE",20],["PERKUSJA",10]]},
            // ... (Tu mo≈ºna dopisaƒá kolejne 40 pyta≈Ñ wed≈Çug schematu)
        ];
        
        // Automatyczne generowanie brakujƒÖcych pyta≈Ñ dla demonstracji struktury
        for(let i=11; i<=50; i++) {
            db.push({q: "Pytanie zapasowe nr "+i+"?", a:[["ODPOWIED≈π 1",50],["ODPOWIED≈π 2",30],["ODPOWIED≈π 3",20]]});
        }

        let peer = new Peer(), conn, scr=0;

        window.onload = () => {
            const l = document.getElementById('q-list');
            db.forEach((x, i) => l.innerHTML += `<option value="${i}">${x.q}</option>`);
            showQ();
        };

        function connect() {
            conn = peer.connect(document.getElementById('tv-id').value);
            conn.on('open', () => alert("PO≈ÅƒÑCZONO!"));
        }

        function send(d) { if(conn) conn.send(d); }

        function showQ() {
            const q = db[document.getElementById('q-list').value];
            const p = document.getElementById('preview'); p.innerHTML = '';
            q.a.forEach((x, i) => {
                p.innerHTML += `<button onclick="rev(${i}, ${x[1]})">${x[0]} (${x[1]})</button>`;
            });
        }

        function setupQ() {
            scr = 0; upScr();
            const q = db[document.getElementById('q-list').value];
            const m = document.getElementById('r-mult').value;
            const multVal = m == 3 ? 2 : (m == 4 ? 3 : 1);
            send({type:'SETUP', num: m, mult: multVal, ans: q.a.map(x=>({t:x[0], p:x[1]}))});
        }

        function rev(idx, pts) {
            const m = document.getElementById('r-mult').value;
            const multVal = m == 3 ? 2 : (m == 4 ? 3 : 1);
            scr += (pts * multVal); upScr();
            send({type:'REV', idx: idx});
        }

        function revF(p) {
            send({
                type: 'FINAL_REV',
                p: p,
                i: document.getElementById('fi').value,
                txt: document.getElementById('ft').value,
                pts: document.getElementById('fp').value
            });
        }

        function upScr() { document.getElementById('scr-disp').innerText = "PUNKTY: " + scr; send({type:'SCORE', val: scr}); }
        function resetScr() { scr = 0; upScr(); }
    </script>
</body>
</html>
