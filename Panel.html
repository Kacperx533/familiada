<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL STEROWANIA</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #222; color: #fff; padding: 20px; display: grid; grid-template-columns: 300px 1fr; gap: 20px; }
        .card { background: #333; padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 5px solid gold; }
        button { width: 100%; padding: 12px; margin: 5px 0; cursor: pointer; border: none; border-radius: 5px; font-weight: bold; }
        .btn-green { background: #28a745; color: white; }
        .btn-red { background: #dc3545; color: white; font-size: 20px; }
        .btn-blue { background: #007bff; color: white; }
        input, select { width: 100%; padding: 10px; margin-bottom: 10px; box-sizing: border-box; background: #000; color: #fff; border: 1px solid #555; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="card">
            <h3>1. PO≈ÅƒÑCZ</h3>
            <input type="text" id="tv-id" placeholder="Wpisz ID z TV">
            <button class="btn-green" onclick="connect()">PO≈ÅƒÑCZ Z TELEWIZOREM</button>
            <div id="status" style="color: gray; margin-top: 5px;">Brak po≈ÇƒÖczenia</div>
        </div>

        <div class="card" style="background: #442222;">
            <h3>2. MULTIMEDIA (D≈∫wiƒôk/X)</h3>
            <button class="btn-blue" onclick="send({type:'INTRO'})">üé¨ CZO≈Å√ìWKA + INTRO</button>
            <hr>
            <button class="btn-red" onclick="send({type:'STRIKE', n:1})">‚ùå Z≈ÅA (X)</button>
            <button class="btn-red" onclick="send({type:'STRIKE', n:2})">‚ùå‚ùå Z≈ÅA (XX)</button>
            <button class="btn-red" onclick="send({type:'STRIKE', n:3})">‚ùå‚ùå‚ùå Z≈ÅA (XXX)</button>
        </div>
    </div>

    <div class="main">
        <div class="card">
            <h3>3. PYTANIA</h3>
            <select id="q-sel" onchange="loadQ()"></select>
            <button class="btn-green" onclick="sendQ()">WY≈öLIJ PYTANIE NA TV</button>
            <div id="ans-box" style="margin-top: 20px;"></div>
        </div>
        <div class="card">
            <h3>4. PUNKTY (SUMA)</h3>
            <div style="font-size: 40px; color: gold;" id="score-val">0</div>
            <button onclick="resetScore()">WYCZY≈öƒÜ PUNKTY</button>
        </div>
    </div>

    <script>
        const DB = [
            {q: "Zwierzƒô na literƒô K?", a: [["KOT", 40], ["PIES", 0], ["KROWA", 30], ["KURA", 20], ["KONIK", 10]]},
            {q: "Co pijemy?", a: [["WODA", 50], ["SOK", 30], ["KAWA", 20]]}
        ];
        
        let conn, peer = new Peer(), total = 0;

        window.onload = () => {
            const s = document.getElementById('q-sel');
            DB.forEach((x, i) => s.innerHTML += `<option value="${i}">${x.q}</option>`);
            loadQ();
        };

        function connect() {
            conn = peer.connect(document.getElementById('tv-id').value);
            conn.on('open', () => { document.getElementById('status').innerText = "PO≈ÅƒÑCZONO!"; document.getElementById('status').style.color = "lime"; });
        }

        function loadQ() {
            const q = DB[document.getElementById('q-sel').value];
            const box = document.getElementById('ans-box'); box.innerHTML = '';
            q.a.forEach((x, i) => {
                const b = document.createElement('button');
                b.innerText = `${x[0]} (${x[1]})`;
                b.onclick = () => { total += x[1]; update(); send({type:'REV', idx:i}); b.style.background = 'green'; };
                box.appendChild(b);
            });
        }

        function sendQ() {
            total = 0; update();
            const q = DB[document.getElementById('q-sel').value];
            send({type:'SETUP', ans: q.a.map(x=>({t:x[0], p:x[1]}))});
        }

        function send(d) { if(conn) conn.send(d); }
        function update() { document.getElementById('score-val').innerText = total; send({type:'SCORE', s:total}); }
        function resetScore() { total = 0; update(); }
    </script>
</body>
</html>
