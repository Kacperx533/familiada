<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL STEROWANIA</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; display: grid; grid-template-columns: 320px 1fr 320px; gap: 15px; padding: 15px; }
        .card { background: #1e1e1e; padding: 12px; border-radius: 8px; border-top: 4px solid #e2ff00; margin-bottom: 10px; }
        button { width: 100%; padding: 10px; margin: 3px 0; cursor: pointer; font-weight: bold; border-radius: 4px; border: none; background: #333; color: white; }
        .btn-gold { background: #e2ff00; color: black; }
        .btn-red { background: #ff3333; }
        .btn-blue { background: #2196F3; }
        .score-box { font-size: 24px; text-align: center; background: #000; color: #e2ff00; padding: 8px; margin: 5px 0; }
        input, select { width: 100%; padding: 8px; background: #000; color: white; border: 1px solid #444; margin-bottom: 8px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 4px; }
        .scroll { height: 300px; overflow-y: auto; border: 1px solid #333; padding: 5px; }
        h3 { color: #e2ff00; font-size: 13px; margin: 0 0 10px 0; text-transform: uppercase; }
    </style>
</head>
<body>
    <div>
        <div class="card"><h3>SYSTEM</h3><input id="tv-id" placeholder="ID z TV"><button class="btn-gold" onclick="connect()">PO≈ÅƒÑCZ</button></div>
        <div class="card">
            <h3>PUNKTY DRU≈ªYN (PANEL)</h3>
            <div id="t1-pts" style="font-size:18px">D1: 0</div><button class="btn-blue" onclick="addPts(1)">DODAJ SUMƒò DO D1</button>
            <div id="t2-pts" style="font-size:18px; margin-top:10px">D2: 0</div><button class="btn-blue" onclick="addPts(2)">DODAJ SUMƒò DO D2</button>
            <button onclick="t1=0;t2=0;updTeams()" style="font-size:10px; margin-top:10px">RESET DRU≈ªYN</button>
        </div>
        <div class="card">
            <h3>MEDIA</h3>
            <button class="btn-gold" onclick="send({type:'PLAY_MEDIA', video:'czolowka.mp4'})">üé¨ CZO≈Å√ìWKA</button>
            <button onclick="send({type:'PLAY_MEDIA', audio:'intro'})">üéµ INTRO MUZYKA</button>
            <button class="btn-red" onclick="send({type:'STOP_VIDEO'})">STOP WIDEO</button>
        </div>
    </div>

    <div>
        <div class="card">
            <h3>RUNDY</h3>
            <div class="grid">
                <button onclick="startR(1)">RUNDA 1</button><button onclick="startR(2)">RUNDA 2</button>
                <button onclick="startR(3)">RUNDA 3</button><button onclick="startR(4)">RUNDA 4</button>
            </div>
        </div>
        <div class="card">
            <h3>PYTANIA RUNDY</h3>
            <select id="q-sel" onchange="preQ()"></select>
            <button class="btn-gold" onclick="sendQ()">ZA≈ÅADUJ NA TV</button>
            <div id="ans-pre" class="scroll"></div>
            <div class="score-box">SUMA RUNDY: <span id="cur-sum">0</span></div>
            <div class="grid">
                <button class="btn-red" onclick="sendX(1)">X</button><button class="btn-red" onclick="sendX(3)">XXX</button>
                <button onclick="send({type:'X',side:'L',n:0});send({type:'X',side:'R',n:0})">CZY≈öƒÜ X</button>
                <button id="side-btn" onclick="side=side==='L'?'R':'L';this.innerText='STRONA: '+side">STRONA: L</button>
            </div>
        </div>
    </div>

    <div>
        <div class="card">
            <h3>FINA≈Å</h3>
            <button class="btn-gold" onclick="send({type:'SETUP_FINAL'});send({type:'PLAY_MEDIA',video:'final.mp4'})">START FINA≈ÅU</button>
            <div class="grid"><button onclick="runT(15)">15s</button><button onclick="runT(20)">20s</button></div>
            <select id="f-sel" onchange="showFH()"></select>
            <div id="f-h" style="font-size:11px; color:#888; margin:10px 0"></div>
            <div id="f-ins" class="scroll"></div>
        </div>
    </div>

    <script>
        const DB = [
            {q:"Wiƒôcej ni≈º jedno zwierzƒô", a:[["STADO",52],["KLUCZ",17],["WATAHA",11],["≈ÅAWICA",8],["SFORA",5]]},
            {q:"Co≈õ co parzy", a:[["POKRZYWA",38],["OGIE≈É",31],["WRZƒÑTEK",19],["S≈ÅO≈ÉCE",7]]},
            {q:"Zwierzƒô na P", a:[["PIES",45],["PTAK",18],["PANDA",12],["PCH≈ÅA",6]]},
            {q:"Przedmiot w kuchni na T", a:[["TALERZ",48],["TARKA",22],["TOSTER",11]]},
            {q:"Co robimy rano?", a:[["MYJEMY SIƒò",35],["PIJEMY KAWƒò",25],["≈öNIADANIE",20]]},
            {q:"Czƒô≈õƒá garderoby na zimƒô", a:[["CZAPKA",42],["SZALIK",25],["RƒòKAWICZKI",15]]},
            {q:"Sk≈Çadnik pizzy", a:[["SER",58],["SZYNKA",15],["PIECZARKI",12],["SOS",9]]},
            {q:"Co mo≈ºna otworzyƒá?", a:[["OKNO",40],["DRZWI",30],["BUTELKƒò",15],["OCZY",10]]},
            {q:"Co kojarzy siƒô z PolskƒÖ?", a:[["PIEROGI",35],["BOCIAN",22],["FLAGA",18],["WAWEL",15]]},
            {q:"Zwierzƒô wiejskie", a:[["KURA",45],["KROWA",20],["≈öWINIA",15],["KO≈É",10]]}
            // ... (Mo≈ºesz tu dopisaƒá kolejne 40 pyta≈Ñ w tym samym formacie)
        ];
        const FS = [
            ["1.Ro≈õlina k≈ÇujƒÖca", "2.Marka auta", "3.Czƒô≈õƒá roweru", "4.Miasto w PL", "5.Imiƒô na A"],
            ["1.S≈Çodycz", "2.Instrument", "3.Drzewo", "4.Pa≈Ñstwo Europa", "5.Kolor"]
            // ... (Dopisz kolejne 8 zestaw√≥w)
        ];

        let peer=new Peer(), conn, sum=0, side='L', t1=0, t2=0;
        function connect() { conn=peer.connect(document.getElementById('tv-id').value); }
        function updTeams() { document.getElementById('t1-pts').innerText="D1: "+t1; document.getElementById('t2-pts').innerText="D2: "+t2; }
        function addPts(n) { if(n===1) t1+=sum; else t2+=sum; sum=0; updS(); updTeams(); send({type:'SCORE',val:0}); }
        function startR(n) { sum=0; updS(); send({type:'RESET_BOARD'}); send({type:'PLAY_MEDIA',audio:'runda'}); }
        window.onload=()=>{
            const s=document.getElementById('q-sel'); DB.forEach((x,i)=>s.innerHTML+=`<option value="${i}">${i+1}. ${x.q}</option>`);
            const fs=document.getElementById('f-sel'); for(let i=0;i<10;i++) fs.innerHTML+=`<option value="${i}">ZESTAW ${i+1}</option>`;
            const fi=document.getElementById('f-ins'); ['p1','p2'].forEach(p=>{
                fi.innerHTML+=`<div style="color:#e2ff00;margin-top:10px">${p.toUpperCase()}</div>`;
                for(let i=0;i<5;i++) fi.innerHTML+=`<div style="display:flex;gap:2px"><input id="f-${p}-t-${i}" style="width:100px"><input id="f-${p}-p-${i}" type="number" style="width:40px"><button onclick="revF('${p}',${i})" style="width:30px;background:#e2ff00;color:black">OK</button></div>`;
            });
            preQ(); showFH();
        };
        function sendQ() { sum=0; updS(); const q=DB[document.getElementById('q-sel').value]; send({type:'SETUP_NORMAL',ans:q.a}); preQ(); }
        function preQ() { const q=DB[document.getElementById('q-sel').value]; document.getElementById('ans-pre').innerHTML=q.a.map((x,i)=>`<button onclick="revN(${i},'${x[0]}',${x[1]})" style="text-align:left">${x[0]} (${x[1]})</button>`).join(''); }
        function revN(i,t,p) { sum+=p; updS(); send({type:'REV_NORMAL',idx:i,t:t,p:p}); send({type:'SCORE',val:sum}); }
        function revF(p,i) { const t=document.getElementById(`f-${p}-t-${i}`).value.toUpperCase(), pts=parseInt(document.getElementById(`f-${p}-p-${i}`).value)||0; sum+=pts; updS(); send({type:'REV_FINAL',player:p,idx:i,t:t,p:pts}); send({type:'SCORE',val:sum}); }
        function showFH() { document.getElementById('f-h').innerHTML=FS[document.getElementById('f-sel').value]?.join("<br>") || "Brak pyta≈Ñ"; }
        function updS() { document.getElementById('cur-sum').innerText=sum; }
        function sendX(n) { send({type:'X',side:side,n:n}); }
        function runT(s) { let c=s; send({type:'TIMER',action:'start',val:c}); let i=setInterval(()=>{c--;send({type:'TIMER',action:'tick',val:c});if(c<=0){clearInterval(i);send({type:'TIMER',action:'stop'});}},1000); }
        function send(d) { if(conn) conn.send(d); }
    </script>
</body>
</html>
