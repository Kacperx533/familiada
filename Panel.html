<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>PANEL STEROWANIA</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; padding: 20px; }
        .card { background: #1e1e1e; padding: 15px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #333; }
        button { padding: 12px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; width: 100%; }
        input { width: 100%; padding: 10px; margin: 5px 0; background: #2a2a2a; color: white; border: 1px solid #444; box-sizing: border-box; }
        .btn-rev { background: #3498db; color: white; margin-bottom: 5px; display: flex; justify-content: space-between; padding: 10px; }
    </style>
</head>
<body>
    <div class="card">
        <button onclick="connect()" style="background: #f1c40f;">POŁĄCZ ZE STUDIEM</button>
        <div id="st" style="text-align: center; margin-top: 10px; color: #777;">ROZŁĄCZONO</div>
    </div>

    <div id="ui" style="display:none">
        <div class="card" style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div><input type="text" id="nA" value="DRUŻYNA A" onchange="sync()"><input type="number" id="sA" value="0" onchange="sync()"></div>
            <div><input type="text" id="nB" value="DRUŻYNA B" onchange="sync()"><input type="number" id="sB" value="0" onchange="sync()"></div>
        </div>
        <div class="card">
            <select id="q-sel" onchange="loadQ()" style="width:100%; padding:10px;"></select>
            <button onclick="sendQ()" style="background: #2ecc71; margin-top: 10px;">WYŚLIJ NA TABLICĘ</button>
        </div>
        <div id="ans" class="card"></div>
        <button onclick="strike()" style="background: #e74c3c; height: 80px; font-size: 30px;">✖ BŁĄD</button>
    </div>

    <script>
        const MOJE_ID = 'FAMILIADA-STUDIO-PRO-2026-XYZ'; 
        let peer = new Peer(), conn, currentQ;
        const db = [
            { q: "Więcej niż jedno zwierzę?", a: [["Stado", 45], ["Para", 25], ["Owce", 15], ["Lama", 5]] },
            { q: "Coś na kanapkę?", a: [["Ser", 40], ["Szynka", 35], ["Pomidor", 15], ["Masło", 10]] },
            { q: "Zwierzę na K?", a: [["Kot", 50], ["Koń", 20], ["Krowa", 15]] }
            // Tutaj możesz dopisać resztę pytań
        ];

        window.onload = () => {
            db.forEach((item, i) => document.getElementById('q-sel').innerHTML += `<option value="${i}">${item.q}</option>`);
            loadQ();
        };

        function connect() {
            conn = peer.connect(MOJE_ID);
            conn.on('open', () => { 
                document.getElementById('ui').style.display='block'; 
                document.getElementById('st').innerText = "POŁĄCZONO"; 
                document.getElementById('st').style.color = "#2ecc71";
            });
        }

        function loadQ() {
            currentQ = db[document.getElementById('q-sel').value];
            const d = document.getElementById('ans'); d.innerHTML = "";
            currentQ.a.forEach((a, i) => d.innerHTML += `<button class="btn-rev" onclick="rev(${i})"><span>${a[0]}</span><span>${a[1]}</span></button>`);
        }

        function sendQ() { conn.send({type:'SETUP', q:currentQ.q, a:currentQ.a.map(x=>({t:x[0], p:x[1]}))}); }
        function rev(i) { conn.send({type:'REVEAL', index:i, text:currentQ.a[i][0], pts:currentQ.a[i][1]}); }
        function strike() { conn.send({type:'STRIKE'}); }
        function sync() { conn.send({type:'UPDATE', scA:document.getElementById('sA').value, scB:document.getElementById('sB').value, nameA:document.getElementById('nA').value, nameB:document.getElementById('nB').value}); }
    </script>
</body>
</html>
